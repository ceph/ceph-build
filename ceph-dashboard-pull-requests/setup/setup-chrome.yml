- apt_repository:
  repo: deb http://dl.google.com/linux/chrome/deb/ stable main
  state: present

- name: Add google-chrome-stable key for apt
  shell: |
    wget https://dl.google.com/linux/linux_signing_key.pub
    apt-key add linux_signing_key.pub
  when: ansible_pkg_mgr  == "apt"

- name: Update apt cache
  apt: update_cache=yes

- name: Install google-chrome-stable for deb based distributions
  apt: pkg=google-chrome-stable state=installed
  when: ansible_os_family == "Debian"

- name: Add Google Chrome stable key for yum
  shell: |
    wget https://dl.google.com/linux/linux_signing_key.pub
    rpm --import linux_signing_key.pub

- name: Add Google Chrome repository
  yum_repository:
    name: Google Chrome
    description: Google Chrome x86_64 repo
    baseurl: http://dl.google.com/linux/chrome/rpm/stable/x86_64

- name: Install google-chrome-stable for RedHat distributions
  yum: pkg=google-chrome-stable state=installed
  when: ansible_os_family == "RedHat"
